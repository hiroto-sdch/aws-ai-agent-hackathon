# 個人投資家向けパーソナル投資アシスタント - 要件定義書

## 1. システム概要

### 1.1 目的
個人投資家を対象に、投資判断をサポートするパーソナル投資アシスタントを提供する。ユーザーの投資履歴やリスク許容度を学習・保持し、市場ニュース・株価データ・決算情報などを取り込み、短期トレードから長期資産形成まで幅広いシナリオに対応する。

### 1.2 提供価値
- **市場情報の要約**: 日経平均、米国株、為替、金利などをわかりやすく要約
- **投資相談の個別化**: ユーザーのリスク許容度・過去の投資履歴に基づき提案
- **決算・ニュース分析**: 企業の決算情報を要約し投資判断材料を提示
- **ワークフロー支援**: 短期トレード相談、長期資産形成相談の分岐

## 2. 対象ユーザー

### 2.1 メインターゲット
- 株式、ETF、債券、暗号資産などを取引する個人投資家
- 投資初心者〜中級者（データ分析を自身でできないが情報を活用したい層）
- 長期資産形成を目指す投資家

### 2.2 ユーザー特性
- 投資経験: 初心者〜中級者
- 技術レベル: 基本的なアプリケーション操作が可能
- 求める価値: 投資判断の支援、市場情報の理解促進

## 3. 機能要件

### 3.1 データ取得機能
- **外部API連携**: Yahoo Finance, Alpha Vantage, Bloomberg など
- **取得データ**: 株価、為替、金利、企業情報、ニュース
- **更新頻度**: リアルタイム〜1分間隔での更新

### 3.2 ユーザー情報管理機能
- **プロファイル管理**: ユーザー基本情報、リスク許容度
- **投資履歴管理**: 過去の取引履歴、パフォーマンス追跡
- **ポートフォリオ管理**: 現在の保有銘柄、数量、平均取得価格
- **メモリー機能**: CoreAgentによる会話履歴と学習内容の保持

### 3.3 分析・要約機能
- **RAG活用**: 市場ニュースや決算書の検索と要約
- **推奨生成**: 短期・長期の投資シナリオに応じた推奨コメント
- **リスク分析**: VaR、ドローダウン想定などのリスク指標算出

### 3.4 ワークフロー機能
- **相談フロー分岐**: 短期トレード相談 / 長期資産形成相談
- **シナリオ分析**: マクロ経済環境を考慮した複数シナリオ提示
- **アクション提案**: 具体的な売買推奨と根拠の提示

### 3.5 UI/UX機能
- **チャットインターフェース**: 自然言語による投資相談
- **ダッシュボード**: 市場概況、保有資産状況の一覧表示
- **可視化機能**: 株価チャート、資産推移グラフ、配分円グラフ
- **レポート出力**: CSV形式でのデータエクスポート

## 4. 非機能要件

### 4.1 性能要件
- **レスポンス時間**: 株価取得APIのレスポンスを3秒以内
- **同時接続数**: 最大1,000ユーザーの同時利用
- **データ更新**: 市場データの1分以内更新
- **AI応答時間**: チャット相談への応答を10秒以内

### 4.2 可用性要件
- **稼働率**: 99.9%以上
- **メンテナンス時間**: 月次計画メンテナンス4時間以内
- **障害復旧**: 平均復旧時間1時間以内

### 4.3 セキュリティ要件
- **認証**: OAuth2.0認証によるAPI連携
- **通信暗号化**: TLS1.3による暗号化通信
- **データ暗号化**: ユーザーデータはAES-256で暗号化保存
- **個人情報保護**: 投資履歴などの機密情報の適切な管理
- **アクセス制御**: ユーザー毎のデータ分離とアクセス権限管理

### 4.4 運用・保守要件
- **ログ管理**:
  - アクセスログ、エラーログ、監査ログの保存
  - ログ保存期間: 1年間
  - ログ分析によるシステム監視
- **監視機能**:
  - システムリソース監視（CPU、メモリ、ディスク使用率）
  - 外部API応答時間監視
  - エラー率監視とアラート機能
- **バックアップ**:
  - ユーザーデータの日次バックアップ
  - バックアップデータの3世代保持
  - 災害復旧計画（RTO: 4時間、RPO: 1時間）

### 4.5 拡張性要件
- **API拡張**: 将来的な暗号資産APIや新しい金融APIの追加対応
- **ユーザー数拡張**: 1万ユーザーまでのスケールアウト対応
- **機能拡張**: 音声入力、SNS連携などの機能追加対応

## 5. 主要ユースケース

### 5.1 日次市場要約
**ユーザーストーリー**: "今日の日経平均と保有株の動きを要約して"
- **入力**: ユーザーのポートフォリオ情報
- **処理**: 市場データ取得、保有銘柄の価格変動算出
- **出力**: 市場サマリー + ユーザー保有資産の騰落率

### 5.2 ポートフォリオ最適化提案
**ユーザーストーリー**: "米国金利の見通しを考慮したポートフォリオ提案して"
- **入力**: 現在のポートフォリオ、リスク許容度、市場環境
- **処理**: マクロ経済分析、リスク・リターン最適化
- **出力**: 推奨資産配分 + 根拠となるニュース・データ

### 5.3 銘柄分析
**ユーザーストーリー**: "○○株の決算内容と投資判断を教えて"
- **入力**: 特定銘柄の指定
- **処理**: 決算書分析、同業他社比較、テクニカル分析
- **出力**: 投資推奨（買い/売り/ホールド）と根拠

## 6. 技術要件

### 6.1 システムアーキテクチャ
- **フロントエンド**: React/Next.js
- **バックエンド**: Python (FastAPI)
- **データベース**:
  - PostgreSQL（ユーザーデータ、取引履歴）
  - Elasticsearch（ニュース検索、ログ分析）
- **AIモデル**: CoreAgent, OpenAI GPT系, RAG実装用LangChain
- **インフラ**: AWS（Lambda, S3, RDS, CloudWatch）

### 6.2 外部API仕様
- **Yahoo Finance API**: 株価、指数、企業情報
- **Alpha Vantage API**: 時系列データ、テクニカル指標
- **Bloomberg API**: 最新ニュース、金利情報（有料想定）

### 6.3 データモデル
- **User Profile**: user_id, risk_tolerance, investment_history, current_portfolio
- **Market Data**: symbol, price, volume, change%, timestamp
- **News Data**: source, headline, summary, relevance_score

## 7. 制約事項

### 7.1 技術制約
- 外部APIの利用制限とコスト制約
- AIモデルの推論時間とコスト制約
- リアルタイムデータの更新頻度制限

### 7.2 法規制制約
- 金融商品取引法への準拠
- 個人情報保護法への準拠
- 投資助言業登録の必要性検討

### 7.3 ビジネス制約
- 初期開発予算と運用コスト
- サービス開始時期の制約
- 競合サービスとの差別化要件

## 8. 将来拡張予定

### 8.1 短期拡張（6ヶ月以内）
- 音声入力機能（Alexa, Siri連携）
- モバイルアプリ対応

### 8.2 中期拡張（1年以内）
- SNS連携（X, LINEで投資レポート配信）
- リアルタイム通知（ポートフォリオ急変動時のアラート）
- 暗号資産対応

### 8.3 長期拡張（1年超）
- 海外市場対応
- 法人向けサービス展開